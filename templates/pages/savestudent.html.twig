{% extends "base.html.twig" %}
{% block title 'Gestion des étudiant' %}
{% block body %}

    <div class="container" style="background-color: white; border: solid 1px silver; border-radius: 5px; padding: 10px">
        <h1>Enregistrer étudiant</h1>

        {{ form_start(form,{attr:{'novalidate':'novalidate'}}) }}
        <div class="row col-md-12">
            <input type="hidden" id="matricule"  value="{% if nbrField is defined %}{{ nbrField }} {%endif%}">
            <div class="row">
            <div class="col-md-6">{{ form_row(form.prenom) }}</div>
            <div class="col-md-6">{{ form_row(form.nom) }}</div>
            </div>
            <div class="row">
            <div class="col-md-6">{{ form_row(form.mail) }}</div>
            <div class="col-md-6">{{ form_row(form.telephone) }}</div>
            </div>
            <div class="row">
            <div class="col-md-6">{{ form_row(form.matricule) }}</div>
            <div class="col-md-6">{{ form_row(form.typeEtudiant) }}</div>
            </div>
            <div class="row">
            <div class="col-md-6">{{ form_row(form.typeBourse) }}</div>
            <div class="col-md-6">{{ form_row(form.numChambre) }}</div>
            </div>
            <div class="row">
            <div class="col-md-6">{{ form_row(form.nomDepartement) }}</div>
            <div class="col-md-6">{{ form_row(form.adresse) }}</div>
            </div>
            <div class="col-md-6">{{ form_row(form.date) }}</div>
        </div>
        
        <button class="btn btn-primary" type="submit">Enregistrer</button>
        {{ form_end(form) }}
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        $divAdreese= $('#etudiant_adresse').parent('div').attr('id','adresse');
        $divAdreese.hide();

        //

        $('#etudiant_typeBourse').change(function (){
            $divAdreese.hide()
            if( $('#etudiant_typeBourse').val()==="Non Boursier" || $('#etudiant_typeBourse').val()=== "Boursier Non Loge"){
                $divAdreese.show();
            }else{
                $divAdreese.hide()
            }

        })
        var matricule= $('#etudiant_matricule');

        $('#etudiant_date_year').change(function (){
            var prenom=  $('#etudiant_prenom').val();
            var nom=  $('#etudiant_nom').val();
            var year=  $('#etudiant_date_year').val();
            matricule.attr(`value`,`${year}${prenom.substr(0,2).toUpperCase()}${nom.substr((nom.length)-2).toUpperCase()}${$('#matricule').val().toString().padStart(4,'0')}`)
        })
    </script>
{% endblock %}